<page-header [action]="phActionTpl">
  <ng-template #phActionTpl> </ng-template>
</page-header>
<nz-card>
  <div class="mb-md">
    <button (click)="st.clear()" nz-button nz-button nzType="primary">Clear Data</button>
    <button
      nz-button
      nz-button
      nzType="primary"
      (click)="st.addRow({ id: 11, email: 'add@email.com', city: 'Sphinx-town', username: 'Thoth' })"
    >
      addRow</button
    >
    <button nz-button (click)="st.removeRow(0)" nz-button nzType="primary"> removeRow index: 0 </button>
    <button (click)="singleUser()" nz-button nzType="primary">Single User</button>
    <button nz-button (click)="downloadFile('xlsx')">Export Xlsx</button>
    <button nz-button (click)="downloadFile('csv')">Export Csv</button>
  </div>
  <st #st [data]="usersList" [columns]="columns">
    <ng-template st-row="firstname" let-item let-index="index">
      <input *ngIf="item.edit" nz-input [ngModel]="item.firstname" (ngModelChange)="st.setRow(index, { firstname: $event })" />
      <ng-container *ngIf="!item.edit">{{ item.firstname }}</ng-container>
    </ng-template>
    <ng-template st-row="lastname" let-item let-index="index">
      <input *ngIf="item.edit" nz-input [ngModel]="item.lastname" (ngModelChange)="st.setRow(index, { lastname: $event })" />
      <ng-container *ngIf="!item.edit">{{ item.lastname }}</ng-container>
    </ng-template>
    <ng-template st-row="username" let-item let-index="index">
      <input *ngIf="item.edit" nz-input [ngModel]="item.username" (ngModelChange)="st.setRow(index, { username: $event })" />
      <ng-container *ngIf="!item.edit">{{ item.username }}</ng-container>
    </ng-template>
    <ng-template st-row="email" let-item let-index="index">
      <input *ngIf="item.edit" nz-input [ngModel]="item.email" (ngModelChange)="st.setRow(index, { email: $event })" />
      <ng-container *ngIf="!item.edit">{{ item.email }}</ng-container>
    </ng-template>
    <ng-template st-row="phone" let-item let-index="index">
      <input *ngIf="item.edit" nz-input [ngModel]="item.phone" (ngModelChange)="st.setRow(index, { phone: $event })" />
      <ng-container *ngIf="!item.edit">{{ item.phone }}</ng-container>
    </ng-template>
    <ng-template st-row="city" let-item let-index="index">
      <input *ngIf="item.edit" nz-input [ngModel]="item.city" (ngModelChange)="st.setRow(index, { city: $event })" />
      <ng-container *ngIf="!item.edit">{{ item.city }}</ng-container>
    </ng-template>
  </st>
</nz-card>
